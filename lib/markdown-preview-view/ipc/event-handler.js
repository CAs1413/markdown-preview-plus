"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const electron_1 = require("electron");
class EventHandler {
    constructor(windowId, editorId, handlers) {
        this.windowId = windowId;
        this.editorId = editorId;
        this.handlers = handlers;
        this.handler = (e) => {
            if (this.editorId !== e.editorId || this.windowId !== e.windowId)
                return;
            const handler = this.handlers[e.event];
            handler(e.arg);
        };
        electron_1.remote.ipcMain.on('markdown-preview-plus:editor-event', this.handler);
    }
    dispose() {
        electron_1.remote.ipcMain.removeListener('markdown-preview-plus:editor-event', this.handler);
    }
}
exports.EventHandler = EventHandler;
function constructEmitter(windowId, editorId) {
    return function (event, arg) {
        electron_1.remote.ipcMain.emit('markdown-preview-plus:editor-event', {
            editorId,
            windowId,
            event,
            arg,
        });
    };
}
exports.constructEmitter = constructEmitter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtaGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tYXJrZG93bi1wcmV2aWV3LXZpZXcvaXBjL2V2ZW50LWhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBaUM7QUFzQmpDO0lBQ0UsWUFDbUIsUUFBZ0IsRUFDaEIsUUFBZ0IsRUFDaEIsUUFBbUM7UUFGbkMsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNoQixhQUFRLEdBQVIsUUFBUSxDQUFRO1FBQ2hCLGFBQVEsR0FBUixRQUFRLENBQTJCO1FBWTlDLFlBQU8sR0FBRyxDQUFDLENBQStCLEVBQUUsRUFBRTtZQUNwRCxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxRQUFRO2dCQUFFLE9BQU07WUFDeEUsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFhLENBQUE7WUFDbEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNoQixDQUFDLENBQUE7UUFkQyxpQkFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsb0NBQW9DLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3ZFLENBQUM7SUFFTSxPQUFPO1FBQ1osaUJBQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUMzQixvQ0FBb0MsRUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FDYixDQUFBO0lBQ0gsQ0FBQztDQU9GO0FBckJELG9DQXFCQztBQUVELDBCQUFpQyxRQUFnQixFQUFFLFFBQWdCO0lBQ2pFLE9BQU8sVUFBb0MsS0FBUSxFQUFFLEdBQWlCO1FBQ3BFLGlCQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsRUFBRTtZQUN4RCxRQUFRO1lBQ1IsUUFBUTtZQUNSLEtBQUs7WUFDTCxHQUFHO1NBQ0osQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFBO0FBQ0gsQ0FBQztBQVRELDRDQVNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVtb3RlIH0gZnJvbSAnZWxlY3Ryb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBDRXZlbnRzIHtcbiAgc3luY1ByZXZpZXc6IG51bWJlclxuICBzY3JvbGxTeW5jOiBbbnVtYmVyLCBudW1iZXJdXG4gIGRlc3Ryb3k6IHZvaWRcbiAgY2hhbmdlR3JhbW1hcjogc3RyaW5nXG4gIGNoYW5nZVBhdGg6IHsgdGl0bGU6IHN0cmluZzsgcGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkIH1cbiAgY2hhbmdlVGV4dDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIElQQ0V2ZW50SGFuZGxlciA9IHtcbiAgW0sgaW4ga2V5b2YgSVBDRXZlbnRzXTogKGFyZzogSVBDRXZlbnRzW0tdKSA9PiB2b2lkXG59XG5cbmV4cG9ydCB0eXBlIEVkaXRvckV2ZW50PFQgZXh0ZW5kcyBrZXlvZiBJUENFdmVudHM+ID0ge1xuICBlZGl0b3JJZDogbnVtYmVyXG4gIHdpbmRvd0lkOiBudW1iZXJcbiAgZXZlbnQ6IFRcbiAgYXJnOiBJUENFdmVudHNbVF1cbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgd2luZG93SWQ6IG51bWJlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVkaXRvcklkOiBudW1iZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSBoYW5kbGVyczogUmVhZG9ubHk8SVBDRXZlbnRIYW5kbGVyPixcbiAgKSB7XG4gICAgcmVtb3RlLmlwY01haW4ub24oJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItZXZlbnQnLCB0aGlzLmhhbmRsZXIpXG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICByZW1vdGUuaXBjTWFpbi5yZW1vdmVMaXN0ZW5lcihcbiAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6ZWRpdG9yLWV2ZW50JyxcbiAgICAgIHRoaXMuaGFuZGxlcixcbiAgICApXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZXIgPSAoZTogRWRpdG9yRXZlbnQ8a2V5b2YgSVBDRXZlbnRzPikgPT4ge1xuICAgIGlmICh0aGlzLmVkaXRvcklkICE9PSBlLmVkaXRvcklkIHx8IHRoaXMud2luZG93SWQgIT09IGUud2luZG93SWQpIHJldHVyblxuICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzW2UuZXZlbnRdIGFzIEZ1bmN0aW9uXG4gICAgaGFuZGxlcihlLmFyZylcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uc3RydWN0RW1pdHRlcih3aW5kb3dJZDogbnVtYmVyLCBlZGl0b3JJZDogbnVtYmVyKSB7XG4gIHJldHVybiBmdW5jdGlvbjxUIGV4dGVuZHMga2V5b2YgSVBDRXZlbnRzPihldmVudDogVCwgYXJnOiBJUENFdmVudHNbVF0pIHtcbiAgICByZW1vdGUuaXBjTWFpbi5lbWl0KCdtYXJrZG93bi1wcmV2aWV3LXBsdXM6ZWRpdG9yLWV2ZW50Jywge1xuICAgICAgZWRpdG9ySWQsXG4gICAgICB3aW5kb3dJZCxcbiAgICAgIGV2ZW50LFxuICAgICAgYXJnLFxuICAgIH0pXG4gIH1cbn1cbiJdfQ==